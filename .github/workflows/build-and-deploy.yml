name: Build and Deploy Services

on:
  push:
    branches:
      - main
      - develop
    # paths:  # Temporarily disabled to allow all pushes to trigger
    #   - 'modules/**'
    #   - 'pom.xml'
    #   - '.github/workflows/build-and-deploy.yml'
  workflow_dispatch:
    inputs:
      services:
        description: 'Services to deploy (comma-separated: iam,order,planning)'
        required: false
        default: 'iam,order,planning'
      skip_tests:
        description: 'Skip tests'
        type: boolean
        default: true
      deploy:
        description: 'Deploy to server after build'
        type: boolean
        default: true

env:
  JAVA_VERSION: '21'
  MAVEN_OPTS: '-Xmx2g -XX:ActiveProcessorCount=2'

jobs:
  build-commons:
    name: Build danxils-commons
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Set up JDK ${{ env.JAVA_VERSION }}
        uses: actions/setup-java@v4
        with:
          java-version: ${{ env.JAVA_VERSION }}
          distribution: 'temurin'
          cache: 'maven'

      - name: Install parent POM
        run: |
          echo "ğŸ“¦ Installing parent POM (danxils-system)..."
          mvn install -N -DskipTests
          echo "âœ… Parent POM installed"

      - name: Build danxils-commons
        run: |
          echo "ğŸ“¦ Building danxils-commons..."
          mkdir -p build-logs
          mvn clean install -pl modules/nexus/danxils-commons -am -DskipTests -T 1C 2>&1 | tee build-logs/commons-build.log
          BUILD_EXIT_CODE=${PIPESTATUS[0]}
          
          if [ ! -f "modules/nexus/danxils-commons/target/danxils-commons-1.0.0-SNAPSHOT.jar" ]; then
            echo "âŒ danxils-commons build failed - JAR not found"
            ls -la modules/nexus/danxils-commons/target/ || true
            exit 1
          fi
          echo "âœ… danxils-commons built successfully"
          
          if [ $BUILD_EXIT_CODE -ne 0 ]; then
            exit $BUILD_EXIT_CODE
          fi

      - name: Upload Commons Build Logs
        if: always()
        uses: actions/upload-artifact@v4
        with:
          name: commons-build-logs
          path: build-logs/commons-build.log
          retention-days: 7
          if-no-files-found: ignore

      - name: Upload danxils-commons artifact
        uses: actions/upload-artifact@v4
        with:
          name: danxils-commons
          path: modules/nexus/danxils-commons/target/*.jar
          retention-days: 7

  build-iam:
    name: Build IAM Service
    needs: build-commons
    runs-on: ubuntu-latest
    if: |
      github.event_name == 'push' ||
      (github.event_name == 'workflow_dispatch' && (contains(github.event.inputs.services, 'iam') || github.event.inputs.services == ''))
    
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Set up JDK ${{ env.JAVA_VERSION }}
        uses: actions/setup-java@v4
        with:
          java-version: ${{ env.JAVA_VERSION }}
          distribution: 'temurin'
          cache: 'maven'

      - name: Download danxils-commons
        uses: actions/download-artifact@v4
        with:
          name: danxils-commons
          path: modules/nexus/danxils-commons/target

      - name: Install danxils-commons
        run: |
          JAR_FILE=$(find modules/nexus/danxils-commons/target -name "*.jar" -not -name "*-sources.jar" -not -name "*-javadoc.jar" | head -1)
          if [ -z "$JAR_FILE" ]; then
            echo "âŒ danxils-commons JAR not found"
            exit 1
          fi
          mvn install:install-file \
            -Dfile="$JAR_FILE" \
            -DgroupId=com.danxils \
            -DartifactId=danxils-commons \
            -Dversion=1.0.0-SNAPSHOT \
            -Dpackaging=jar \
            -DgeneratePom=true

      - name: Build IAM Service
        run: |
          cd modules/nexus/iam-service
          mkdir -p ../../build-logs
          mvn clean package -DskipTests -T 1C 2>&1 | tee ../../build-logs/iam-build.log
          BUILD_EXIT_CODE=${PIPESTATUS[0]}
          
          if [ ! -f "target/iam-app-1.0.0-SNAPSHOT.jar" ]; then
            echo "âŒ IAM Service build failed"
            exit 1
          fi
          JAR_SIZE=$(du -h "target/iam-app-1.0.0-SNAPSHOT.jar" | cut -f1)
          echo "âœ… Built: iam-app-1.0.0-SNAPSHOT.jar ($JAR_SIZE)"
          
          if [ $BUILD_EXIT_CODE -ne 0 ]; then
            exit $BUILD_EXIT_CODE
          fi

      - name: Upload IAM Build Logs
        if: always()
        uses: actions/upload-artifact@v4
        with:
          name: iam-build-logs
          path: build-logs/iam-build.log
          retention-days: 7
          if-no-files-found: ignore

      - name: Upload IAM JAR
        uses: actions/upload-artifact@v4
        with:
          name: iam-jar
          path: modules/nexus/iam-service/target/iam-app-1.0.0-SNAPSHOT.jar
          retention-days: 7

  build-order:
    name: Build Order Service
    needs: build-commons
    runs-on: ubuntu-latest
    if: |
      github.event_name == 'push' ||
      (github.event_name == 'workflow_dispatch' && (contains(github.event.inputs.services, 'order') || github.event.inputs.services == ''))
    
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Set up JDK ${{ env.JAVA_VERSION }}
        uses: actions/setup-java@v4
        with:
          java-version: ${{ env.JAVA_VERSION }}
          distribution: 'temurin'
          cache: 'maven'

      - name: Download danxils-commons
        uses: actions/download-artifact@v4
        with:
          name: danxils-commons
          path: modules/nexus/danxils-commons/target

      - name: Install danxils-commons
        run: |
          JAR_FILE=$(find modules/nexus/danxils-commons/target -name "*.jar" -not -name "*-sources.jar" -not -name "*-javadoc.jar" | head -1)
          if [ -z "$JAR_FILE" ]; then
            echo "âŒ danxils-commons JAR not found"
            exit 1
          fi
          mvn install:install-file \
            -Dfile="$JAR_FILE" \
            -DgroupId=com.danxils \
            -DartifactId=danxils-commons \
            -Dversion=1.0.0-SNAPSHOT \
            -Dpackaging=jar \
            -DgeneratePom=true

      - name: Build Order Service
        run: |
          cd modules/nexus/order-service
          mkdir -p ../../build-logs
          mvn clean package -DskipTests -T 1C 2>&1 | tee ../../build-logs/order-build.log
          BUILD_EXIT_CODE=${PIPESTATUS[0]}
          
          if [ ! -f "target/order-service-1.0.0-SNAPSHOT.jar" ]; then
            echo "âŒ Order Service build failed"
            exit 1
          fi
          JAR_SIZE=$(du -h "target/order-service-1.0.0-SNAPSHOT.jar" | cut -f1)
          echo "âœ… Built: order-service-1.0.0-SNAPSHOT.jar ($JAR_SIZE)"
          
          if [ $BUILD_EXIT_CODE -ne 0 ]; then
            exit $BUILD_EXIT_CODE
          fi

      - name: Upload Order Build Logs
        if: always()
        uses: actions/upload-artifact@v4
        with:
          name: order-build-logs
          path: build-logs/order-build.log
          retention-days: 7
          if-no-files-found: ignore

      - name: Upload Order JAR
        uses: actions/upload-artifact@v4
        with:
          name: order-jar
          path: modules/nexus/order-service/target/order-service-1.0.0-SNAPSHOT.jar
          retention-days: 7

  build-planning:
    name: Build Planning Service
    needs: build-commons
    runs-on: ubuntu-latest
    if: |
      github.event_name == 'push' ||
      (github.event_name == 'workflow_dispatch' && (contains(github.event.inputs.services, 'planning') || github.event.inputs.services == ''))
    
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Set up JDK ${{ env.JAVA_VERSION }}
        uses: actions/setup-java@v4
        with:
          java-version: ${{ env.JAVA_VERSION }}
          distribution: 'temurin'
          cache: 'maven'

      - name: Download danxils-commons
        uses: actions/download-artifact@v4
        with:
          name: danxils-commons
          path: modules/nexus/danxils-commons/target

      - name: Install danxils-commons
        run: |
          JAR_FILE=$(find modules/nexus/danxils-commons/target -name "*.jar" -not -name "*-sources.jar" -not -name "*-javadoc.jar" | head -1)
          if [ -z "$JAR_FILE" ]; then
            echo "âŒ danxils-commons JAR not found"
            exit 1
          fi
          mvn install:install-file \
            -Dfile="$JAR_FILE" \
            -DgroupId=com.danxils \
            -DartifactId=danxils-commons \
            -Dversion=1.0.0-SNAPSHOT \
            -Dpackaging=jar \
            -DgeneratePom=true

      - name: Build Planning Service
        run: |
          cd modules/flux/planning-service
          mkdir -p ../../build-logs
          mvn clean package -DskipTests -T 1C 2>&1 | tee ../../build-logs/planning-build.log
          BUILD_EXIT_CODE=${PIPESTATUS[0]}
          
          if [ ! -f "target/planning-service-1.0.0-SNAPSHOT.jar" ]; then
            echo "âŒ Planning Service build failed"
            exit 1
          fi
          JAR_SIZE=$(du -h "target/planning-service-1.0.0-SNAPSHOT.jar" | cut -f1)
          echo "âœ… Built: planning-service-1.0.0-SNAPSHOT.jar ($JAR_SIZE)"
          
          if [ $BUILD_EXIT_CODE -ne 0 ]; then
            exit $BUILD_EXIT_CODE
          fi

      - name: Upload Planning Build Logs
        if: always()
        uses: actions/upload-artifact@v4
        with:
          name: planning-build-logs
          path: build-logs/planning-build.log
          retention-days: 7
          if-no-files-found: ignore

      - name: Upload Planning JAR
        uses: actions/upload-artifact@v4
        with:
          name: planning-jar
          path: modules/flux/planning-service/target/planning-service-1.0.0-SNAPSHOT.jar
          retention-days: 7

  build-summary:
    name: Build Summary & Analysis
    needs: [build-commons, build-iam, build-order, build-planning]
    runs-on: ubuntu-latest
    if: always()
    
    steps:
      - name: Download all build logs
        uses: actions/download-artifact@v4
        with:
          pattern: '*-build-logs'
          merge-multiple: false
      
      - name: Generate Build Summary
        run: |
          mkdir -p build-summary
          echo "# ğŸ“Š Build Summary" > build-summary/summary.md
          echo "" >> build-summary/summary.md
          echo "**Workflow Run:** ${{ github.run_number }}" >> build-summary/summary.md
          echo "**Commit:** ${{ github.sha }}" >> build-summary/summary.md
          echo "**Branch:** ${{ github.ref_name }}" >> build-summary/summary.md
          echo "**Triggered by:** ${{ github.actor }}" >> build-summary/summary.md
          echo "" >> build-summary/summary.md
          echo "## Build Status" >> build-summary/summary.md
          echo "" >> build-summary/summary.md
          
          # Analyze each service
          for service in commons iam order planning; do
            log_file=""
            case $service in
              commons) log_file="commons-build-logs/commons-build.log" ;;
              iam) log_file="iam-build-logs/iam-build.log" ;;
              order) log_file="order-build-logs/order-build.log" ;;
              planning) log_file="planning-build-logs/planning-build.log" ;;
            esac
            
            if [ -f "$log_file" ]; then
              # Check for errors
              if grep -q "BUILD FAILURE\|ERROR\|Failed to execute goal" "$log_file"; then
                echo "âŒ **$service**: Build Failed" >> build-summary/summary.md
                # Extract key errors
                echo "\`\`\`" >> build-summary/summary.md
                grep -E "ERROR|BUILD FAILURE|Failed to execute" "$log_file" | head -5 >> build-summary/summary.md
                echo "\`\`\`" >> build-summary/summary.md
              elif grep -q "BUILD SUCCESS" "$log_file"; then
                echo "âœ… **$service**: Build Success" >> build-summary/summary.md
                # Extract build time if available
                if grep -q "Total time:" "$log_file"; then
                  build_time=$(grep "Total time:" "$log_file" | tail -1 | sed 's/.*Total time: //' | sed 's/ s.*//')
                  echo "   - Build time: ${build_time}s" >> build-summary/summary.md
                fi
              else
                echo "âš ï¸ **$service**: Status Unknown" >> build-summary/summary.md
              fi
            else
              echo "â“ **$service**: Log not found" >> build-summary/summary.md
            fi
            echo "" >> build-summary/summary.md
          done
          
          echo "## Full Logs" >> build-summary/summary.md
          echo "" >> build-summary/summary.md
          echo "Download build logs from artifacts:" >> build-summary/summary.md
          echo "- commons-build-logs" >> build-summary/summary.md
          echo "- iam-build-logs" >> build-summary/summary.md
          echo "- order-build-logs" >> build-summary/summary.md
          echo "- planning-build-logs" >> build-summary/summary.md
          
          cat build-summary/summary.md
      
      - name: Upload Build Summary
        uses: actions/upload-artifact@v4
        with:
          name: build-summary
          path: build-summary/summary.md
          retention-days: 7

  deploy:
    name: Deploy to Server
    needs: [build-iam, build-order, build-planning]
    runs-on: ubuntu-latest
    if: |
      (github.event_name == 'workflow_dispatch' && github.event.inputs.deploy == 'true') ||
      (github.event_name == 'push' && github.ref == 'refs/heads/main')
    
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Download all JAR artifacts
        uses: actions/download-artifact@v4
        with:
          pattern: '*-jar'
          merge-multiple: false

      - name: Determine services to deploy
        id: services
        run: |
          if [ "${{ github.event_name }}" = "workflow_dispatch" ]; then
            SERVICES="${{ github.event.inputs.services }}"
          else
            # On push, build all services that were actually built
            SERVICES=""
            if [ -f "iam-jar/iam-app-1.0.0-SNAPSHOT.jar" ]; then
              SERVICES="${SERVICES}iam,"
            fi
            if [ -f "order-jar/order-service-1.0.0-SNAPSHOT.jar" ]; then
              SERVICES="${SERVICES}order,"
            fi
            if [ -f "planning-jar/planning-service-1.0.0-SNAPSHOT.jar" ]; then
              SERVICES="${SERVICES}planning,"
            fi
            # Remove trailing comma or default to all
            SERVICES=$(echo "$SERVICES" | sed 's/,$//')
            if [ -z "$SERVICES" ]; then
              SERVICES="iam,order,planning"
            fi
          fi
          echo "services=$SERVICES" >> $GITHUB_OUTPUT
          echo "ğŸ“¦ Services to deploy: $SERVICES"

      - name: Setup SSH
        uses: webfactory/ssh-agent@v0.9.0
        with:
          ssh-private-key: ${{ secrets.DEPLOY_SSH_KEY }}
        
      - name: Verify SSH Key
        run: |
          echo "ğŸ” Verifying SSH key..."
          if ssh-add -l > /dev/null 2>&1; then
            echo "âœ… SSH key loaded successfully"
            ssh-add -l
          else
            echo "âŒ Failed to load SSH key"
            exit 1
          fi

      - name: Test SSH connection
        run: |
          ssh -o StrictHostKeyChecking=no \
              -p ${{ secrets.DEPLOY_SSH_PORT || '22' }} \
              ${{ secrets.DEPLOY_SSH_USER }}@${{ secrets.DEPLOY_SSH_HOST }} \
              "echo 'âœ… SSH connection successful'"

      - name: Deploy IAM Service
        if: contains(steps.services.outputs.services, 'iam')
        run: |
          REMOTE_BASE="${{ secrets.DEPLOY_REMOTE_BASE || '/root/VoidTracker' }}"
          REMOTE_DIR="$REMOTE_BASE/modules/nexus/iam-service/target"
          
          ssh -o StrictHostKeyChecking=no \
              -p ${{ secrets.DEPLOY_SSH_PORT || '22' }} \
              ${{ secrets.DEPLOY_SSH_USER }}@${{ secrets.DEPLOY_SSH_HOST }} \
              "mkdir -p $REMOTE_DIR"
          
          scp -o StrictHostKeyChecking=no \
              -P ${{ secrets.DEPLOY_SSH_PORT || '22' }} \
              iam-jar/iam-app-1.0.0-SNAPSHOT.jar \
              ${{ secrets.DEPLOY_SSH_USER }}@${{ secrets.DEPLOY_SSH_HOST }}:$REMOTE_DIR/
          
          echo "âœ… IAM Service deployed"

      - name: Deploy Order Service
        if: contains(steps.services.outputs.services, 'order')
        run: |
          REMOTE_BASE="${{ secrets.DEPLOY_REMOTE_BASE || '/root/VoidTracker' }}"
          REMOTE_DIR="$REMOTE_BASE/modules/nexus/order-service/target"
          
          ssh -o StrictHostKeyChecking=no \
              -p ${{ secrets.DEPLOY_SSH_PORT || '22' }} \
              ${{ secrets.DEPLOY_SSH_USER }}@${{ secrets.DEPLOY_SSH_HOST }} \
              "mkdir -p $REMOTE_DIR"
          
          scp -o StrictHostKeyChecking=no \
              -P ${{ secrets.DEPLOY_SSH_PORT || '22' }} \
              order-jar/order-service-1.0.0-SNAPSHOT.jar \
              ${{ secrets.DEPLOY_SSH_USER }}@${{ secrets.DEPLOY_SSH_HOST }}:$REMOTE_DIR/
          
          echo "âœ… Order Service deployed"

      - name: Deploy Planning Service
        if: contains(steps.services.outputs.services, 'planning')
        run: |
          REMOTE_BASE="${{ secrets.DEPLOY_REMOTE_BASE || '/root/VoidTracker' }}"
          REMOTE_DIR="$REMOTE_BASE/modules/flux/planning-service/target"
          
          ssh -o StrictHostKeyChecking=no \
              -p ${{ secrets.DEPLOY_SSH_PORT || '22' }} \
              ${{ secrets.DEPLOY_SSH_USER }}@${{ secrets.DEPLOY_SSH_HOST }} \
              "mkdir -p $REMOTE_DIR"
          
          scp -o StrictHostKeyChecking=no \
              -P ${{ secrets.DEPLOY_SSH_PORT || '22' }} \
              planning-jar/planning-service-1.0.0-SNAPSHOT.jar \
              ${{ secrets.DEPLOY_SSH_USER }}@${{ secrets.DEPLOY_SSH_HOST }}:$REMOTE_DIR/
          
          echo "âœ… Planning Service deployed"

      - name: Restart Services on Server
        if: success()
        run: |
          echo "ğŸ”„ Restarting services on server (sequential with delays)..."
          REMOTE_BASE="${{ secrets.DEPLOY_REMOTE_BASE || '/root/VoidTracker' }}"
          SERVICES="${{ steps.services.outputs.services }}"
          
          IFS=',' read -ra SERVICE_ARRAY <<< "$SERVICES"
          SERVICE_COUNT=${#SERVICE_ARRAY[@]}
          CURRENT=0
          
          for service in "${SERVICE_ARRAY[@]}"; do
            service=$(echo "$service" | xargs)
            CURRENT=$((CURRENT + 1))
            
            case "$service" in
              iam)
                echo "ğŸ”„ Restarting IAM Service ($CURRENT/$SERVICE_COUNT)..."
                ssh -o StrictHostKeyChecking=no \
                    -p ${{ secrets.DEPLOY_SSH_PORT || '22' }} \
                    ${{ secrets.DEPLOY_SSH_USER }}@${{ secrets.DEPLOY_SSH_HOST }} \
                    "cd $REMOTE_BASE && ./stop-iam.sh 2>/dev/null || true && sleep 2 && ./start-iam.sh" || echo "âš ï¸  Failed to restart IAM"
                ;;
              order)
                echo "ğŸ”„ Restarting Order Service ($CURRENT/$SERVICE_COUNT)..."
                ssh -o StrictHostKeyChecking=no \
                    -p ${{ secrets.DEPLOY_SSH_PORT || '22' }} \
                    ${{ secrets.DEPLOY_SSH_USER }}@${{ secrets.DEPLOY_SSH_HOST }} \
                    "cd $REMOTE_BASE && ./stop-order.sh 2>/dev/null || true && sleep 2 && ./start-order.sh" || echo "âš ï¸  Failed to restart Order"
                ;;
              planning)
                echo "ğŸ”„ Restarting Planning Service ($CURRENT/$SERVICE_COUNT)..."
                ssh -o StrictHostKeyChecking=no \
                    -p ${{ secrets.DEPLOY_SSH_PORT || '22' }} \
                    ${{ secrets.DEPLOY_SSH_USER }}@${{ secrets.DEPLOY_SSH_HOST }} \
                    "cd $REMOTE_BASE && ./stop-planning.sh 2>/dev/null || true && sleep 2 && ./start-planning.sh" || echo "âš ï¸  Failed to restart Planning"
                ;;
            esac
            
            # Add delay between service restarts to prevent server overload
            # Only delay if not the last service
            if [ $CURRENT -lt $SERVICE_COUNT ]; then
              echo "â³ Waiting 15 seconds before next service restart (preventing server overload)..."
              sleep 15
            fi
          done
          
          echo "âœ… Services restart initiated (sequential with delays)"

      - name: Restart Frontend on Server
        if: success()
        run: |
          echo "ğŸ”„ Restarting Frontend on server..."
          REMOTE_BASE="${{ secrets.DEPLOY_REMOTE_BASE || '/root/VoidTracker' }}"
          
          ssh -o StrictHostKeyChecking=no \
              -p ${{ secrets.DEPLOY_SSH_PORT || '22' }} \
              ${{ secrets.DEPLOY_SSH_USER }}@${{ secrets.DEPLOY_SSH_HOST }} \
              "cd $REMOTE_BASE && \
               ./stop-frontend.sh 2>/dev/null || true && \
               sleep 2 && \
               ./start-frontend.sh" || echo "âš ï¸  Failed to restart Frontend"
          
          echo "âœ… Frontend restart initiated"

      - name: Verify Services Health
        if: success()
        run: |
          echo "ğŸ¥ Verifying services health..."
          REMOTE_BASE="${{ secrets.DEPLOY_REMOTE_BASE || '/root/VoidTracker' }}"
          SERVICES="${{ steps.services.outputs.services }}"
          
          sleep 10
          
          IFS=',' read -ra SERVICE_ARRAY <<< "$SERVICES"
          for service in "${SERVICE_ARRAY[@]}"; do
            service=$(echo "$service" | xargs)
            
            case "$service" in
              iam)
                PORT="8090"
                ;;
              order)
                PORT="8091"
                ;;
              planning)
                PORT="8093"
                ;;
              *)
                continue
                ;;
            esac
            
            echo "ğŸ” Checking $service on port $PORT..."
            ssh -o StrictHostKeyChecking=no \
                -p ${{ secrets.DEPLOY_SSH_PORT || '22' }} \
                ${{ secrets.DEPLOY_SSH_USER }}@${{ secrets.DEPLOY_SSH_HOST }} \
                "curl -s -f http://localhost:$PORT/actuator/health > /dev/null && \
                 echo 'âœ… $service is healthy' || \
                 echo 'âš ï¸  $service health check failed'" || \
            echo "âš ï¸  Could not check $service health"
          done
          
          echo "ğŸ” Checking Frontend on port 5173..."
          ssh -o StrictHostKeyChecking=no \
              -p ${{ secrets.DEPLOY_SSH_PORT || '22' }} \
              ${{ secrets.DEPLOY_SSH_USER }}@${{ secrets.DEPLOY_SSH_HOST }} \
              "curl -s -f http://localhost:5173 > /dev/null && \
               echo 'âœ… Frontend is accessible' || \
               echo 'âš ï¸  Frontend health check failed'" || \
          echo "âš ï¸  Could not check Frontend health"

      - name: Deployment Summary
        run: |
          echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
          echo "â•‘   DEPLOYMENT COMPLETE âœ…                â•‘"
          echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
          echo ""
          echo "ğŸ“¦ Services deployed: ${{ steps.services.outputs.services }}"
          echo "ğŸ”„ Services restarted automatically"
          echo "ğŸ–¥ï¸  Frontend restarted automatically"
          echo ""
          echo "ğŸ”— View deployment logs:"
          echo "   https://github.com/cru7rose/VoidTracker/actions/runs/${{ github.run_id }}"
